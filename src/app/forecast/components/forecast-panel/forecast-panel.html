<div
  class="forecast"
  (mouseenter)="pauseAutoAdvance()"
  (mouseleave)="resumeAutoAdvance()"
>
  <!-- Botón anterior -->
  <div class="forecast-btn">
    <button
      mat-icon-button
      matTooltip="Anterior"
      (click)="previousForecast()"
      aria-label="Anterior"
    >
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>

  <!-- Ubicación -->
  @if (currentForecast) {
  <div class="forecast-location" [@fadeUp]="currentIndex">
    <div class="location-grid">
      <div class="fecha">
        <div class="label">Fecha Pronóstico</div>
        <div class="value">{{ currentForecast.date | date: 'dd/MM/yyyy' }}</div>
      </div>
      <div class="provincia">
        <div class="label">Provincia</div>
        <div class="value">{{ currentForecast.fk_province_name }}</div>
      </div>
      <div class="ubicacion">
        <div class="label">Ubicación</div>
        <div class="value">{{ currentForecast.locality_name }}</div>
      </div>
    </div>
  </div>
  }

  <!-- Temperaturas y Radiación -->
  @if (currentForecast) {
  <div class="forecast-temp-uv" [@fadeUp]="currentIndex">
    <div class="temp-uv-grid">
      <div class="temp-max">
        <div class="label">Temp max</div>
        <div class="value">{{ currentForecast.max_temperature }} °C</div>
      </div>
      <div class="temp-min">
        <div class="label">Temp min</div>
        <div class="value">{{ currentForecast.min_temperature }} °C</div>
      </div>
      <div class="uv" [matTooltip]="uvTooltip">
        <div class="label">Radiación UV</div>
        <div class="uv-box">
          <div class="uv-bar">
            <div
              class="uv-progress {{ getUvClass() }}"
              [style.width.%]="(currentForecast.uv_radiation / 10) * 100"
            ></div>
          </div>
          <div class="uv-value">{{ currentForecast.uv_radiation }}</div>
        </div>
      </div>
    </div>
  </div>
  }

  <!-- Condiciones -->
  @if (currentForecast) {
  <div class="forecast-conditions" [@fadeUp]="currentIndex">
    <div class="conditions-header">Condiciones para hoy</div>
    <div class="conditions-grid">
      @for (period of currentForecast.forecast; track period.period_name) { @if
      (period.status) {
      <div class="condition" [matTooltip]="period.condition_description">
        <img [src]="period.condition_icon_url" [alt]="period.condition_name" />
        <span>{{ period.period_name | lowercase }}</span>
      </div>
      } }
    </div>
  </div>
  }

  <!-- Botón a visor pronósticos -->
  <div class="forecast-btn-open">
    <button
      mat-icon-button
      matTooltip="Ir al visor de pronósticos"
      (click)="openForecastLink()"
      aria-label="Visor Pronósticos"
    >
      <mat-icon>open_in_new</mat-icon>
    </button>
  </div>

  <!-- Botón siguiente -->
  <div class="forecast-btn">
    <button
      mat-icon-button
      matTooltip="Siguiente"
      (click)="nextForecast()"
      aria-label="Siguiente"
    >
      <mat-icon>arrow_forward</mat-icon>
    </button>
  </div>
</div>
